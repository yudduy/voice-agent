# VERIES Voice AI Caller - Environment Configuration

# ======================
# Core Application Settings
# ======================
NODE_ENV=development
PORT=3000
WEBHOOK_BASE_URL=https://your-domain.ngrok-free.app

# ======================
# AI & Voice Services
# ======================

# OpenAI Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4o-mini
OPENAI_STREAMING_MODEL=gpt-4o-mini
AI_TEMPERATURE=0.3
AI_MAX_TOKENS=200
AI_STREAMING_MAX_TOKENS=120

# Groq (Speech-to-Text)
GROQ_API_KEY=your_groq_api_key_here
GROQ_WHISPER_MODEL=whisper-large-v3
ENABLE_GROQ_TRANSCRIPTION=true

# ElevenLabs (Text-to-Speech)
ELEVENLABS_API_KEY=your_elevenlabs_api_key_here
ELEVENLABS_VOICE_ID=EXAVITQu4vr4xnSDxMaL

# Hyperbolic (Fallback TTS)
HYPERBOLIC_API_KEY=your_hyperbolic_api_key_here

# ======================
# Twilio Configuration
# ======================
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=+1234567890

# Speech Recognition Settings
SPEECH_RECOGNITION_PREFERENCE=groq
ENABLE_RECORDING=true
TTS_PREFERENCE=elevenlabs

# ======================
# Database Configuration
# ======================

# Supabase
SUPABASE_URL=your_supabase_project_url
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# Redis (Upstash)
UPSTASH_REDIS_REST_URL=your_upstash_redis_url
UPSTASH_REDIS_REST_TOKEN=your_upstash_redis_token

# ======================
# Advanced Features
# ======================

# Core Feature Toggles
ENABLE_STREAMING=true
ENABLE_SPECULATIVE_EXECUTION=true
ENABLE_BACKCHANNELS=true
ENABLE_WEBRTC=false

# Speculative Execution Settings
SPECULATION_MIN_LENGTH=12
SPECULATION_MAX_LENGTH=50
SPECULATION_CORRECTION_THRESHOLD=0.25
SPECULATION_CONFIDENCE_THRESHOLD=0.65
SPECULATION_TIMEOUT=2000
SPECULATION_PIVOT_TIMEOUT=100

# Backchannel Settings
BACKCHANNEL_MIN_DELAY=250
BACKCHANNEL_MAX_DURATION=2000
BACKCHANNEL_EMERGENCY_THRESHOLD=1200
BACKCHANNEL_CONFLICT_MARGIN=100

# Backchannel Type Weights (should sum to 1.0)
BACKCHANNEL_ACKNOWLEDGMENT_WEIGHT=0.3
BACKCHANNEL_PROCESSING_WEIGHT=0.4
BACKCHANNEL_THINKING_WEIGHT=0.2
BACKCHANNEL_EMPATHY_WEIGHT=0.1

# ======================
# WebRTC Configuration (Future)
# ======================
WEBRTC_PROVIDER=daily
WEBRTC_SAMPLE_RATE=16000
WEBRTC_CHUNK_SIZE=1024
WEBRTC_VAD_THRESHOLD=0.5
WEBRTC_SILENCE_TIMEOUT=500

# Daily.co
DAILY_API_KEY=your_daily_api_key
DAILY_ROOM_URL=https://your-domain.daily.co/room

# LiveKit
LIVEKIT_SERVER_URL=wss://your-livekit-server
LIVEKIT_API_KEY=your_livekit_api_key
LIVEKIT_API_SECRET=your_livekit_api_secret

# ======================
# Performance Optimization
# ======================

# Cache Configuration
CONVERSATION_TTL_HOURS=24
VOICE_MONITOR_MAX_HISTORY=100
TTS_CACHE_DIR=./public/tts-cache
TTS_CACHE_MAX_AGE_DAYS=7

# Performance Configuration
DEFAULT_API_TIMEOUT_MS=5000
DEFAULT_RETRY_COUNT=3
DEFAULT_RETRY_DELAY_MS=1000
MAX_RETRY_DELAY_MS=5000
RETRY_BACKOFF_FACTOR=2

# Timeout Settings
GROQ_STT_TIMEOUT_MS=10000
OPENAI_TIMEOUT_MS=30000
ELEVENLABS_TTS_TIMEOUT_MS=15000
TWILIO_WEBHOOK_TIMEOUT_MS=10000

# Predictive Processing
ENABLE_PREDICTIVE_PROCESSING=true
PREDICTIVE_BUFFER_SIZE=5

# Smart Buffering
ENABLE_SMART_BUFFERING=true
BUFFER_PREROLL_MS=200
BUFFER_POSTROLL_MS=100

# Edge Optimization
ENABLE_EDGE_OPTIMIZATION=false
ENABLE_CDN_CACHING=false

# ======================
# Monitoring & Debugging
# ======================

# Metrics & Logging
ENABLE_DETAILED_METRICS=true
METRICS_INTERVAL=1000
LOG_LEVEL=info

# Performance Monitoring
DEBUG_LATENCY=false
DEBUG_STT=false
DEBUG_LLM=false
DEBUG_TTS=false

# ======================
# System Configuration
# ======================

# Emergency Handling
ENABLE_EMERGENCY_FALLBACKS=true
MAX_PROCESSING_TIME=3000
EMERGENCY_RESPONSE_TEXT=I apologize, but I'm experiencing technical difficulties. Please try again.

# Scheduler Settings
DISABLE_SCHEDULER=false
DISABLE_ONBOARDING=false

# Testing
TEST_PHONE=+19713364433

# ======================
# Development Settings
# ======================

# Development Tools
ENABLE_NGROK=true
NGROK_SUBDOMAIN=your-subdomain

# Test Configuration
ENABLE_TEST_USER_CREATION=true
TEST_USER_PREFIX=test_user_

# ======================
# Production Settings
# ======================

# Security
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Caching
ENABLE_TTS_CACHING=true
TTS_CACHE_TTL=3600

# ======================
# Optional Services
# ======================

# External Integrations (if needed)
# CALENDAR_API_KEY=your_calendar_api_key
# SLACK_BOT_TOKEN=your_slack_bot_token
# GOOGLE_CLOUD_PROJECT_ID=your_google_project_id

# ======================
# Notes
# ======================
# 1. Replace all placeholder values with your actual credentials
# 2. Never commit this file with real credentials to version control
# 3. For production, use environment variables or secure secret management
# 4. Test with ngrok for local development: ngrok http 3000
# 5. Ensure all required services are properly configured before starting